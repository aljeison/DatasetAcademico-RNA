<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ“ PredicciÃ³n AcadÃ©mica (RegresiÃ³n LogÃ­stica) + RNA</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=5" />
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ“ PredicciÃ³n AcadÃ©mica â€” RegresiÃ³n LogÃ­stica</h1>
      <p class="sub">
        ClasificaciÃ³n de estudiantes Aprobado / No Aprobado a partir de variables acadÃ©micas numÃ©ricas.
      </p>
    </header>

    <section class="card">
      <div class="hero">
        <div class="controls">
          <label for="rowsInput">TamaÃ±o del dataset:</label>
          <input id="rowsInput" type="number" min="1000" step="1000" value="10000" />
          <label class="chk"><input id="forceChk" type="checkbox" /> Re-crear dataset</label>
        </div>
        <div class="actions">
          <button id="startBtn" class="btn-primary" onclick="startPipeline()">â–¶ï¸ Empezar</button>
          <a id="btnCsv" class="btn-ghost" href="#">â¬‡ï¸ Dataset CSV</a>
          <a id="btnJson" class="btn-ghost" href="#">â¬‡ï¸ Resultados JSON</a>
        </div>
      </div>

      <div id="steps" class="steps hidden">
        <div class="step"><div class="dot"></div><div class="label">1) Preparando / generando datasetâ€¦</div></div>
        <div class="step"><div class="dot"></div><div class="label">2) Separando X (entradas) y Y (salida)â€¦</div></div>
        <div class="step"><div class="dot"></div><div class="label">3) Entrenando regresiÃ³n logÃ­sticaâ€¦</div></div>
        <div class="step"><div class="dot"></div><div class="label">4) Calculando mÃ©tricas y matriz de confusiÃ³nâ€¦</div></div>
        <div class="step"><div class="dot"></div><div class="label">5) Renderizando tablasâ€¦</div></div>
        <div class="progress"><div class="bar" id="bar"></div></div>
      </div>

      <div id="result" class="result hidden">
        <h2>ğŸ“Š Resumen del experimento</h2>
        <div class="grid">
          <div class="box">
            <h3>ğŸ“¦ Dataset</h3>
            <p><b>Filas:</b> <span id="rows">â€“</span></p>
            <p><b>Columnas:</b> <span id="cols">â€“</span></p>
            <p><b>Entradas X:</b> <span id="xcols">â€“</span></p>
            <p><b>Salidas Y:</b> <span id="ycols">â€“</span></p>
            <p style="color:#9fc6ff;margin-top:6px;"><small id="note">â€“</small></p>
          </div>
          <div class="box">
            <h3>ğŸ§® MÃ©tricas de la regresiÃ³n logÃ­stica</h3>
            <div class="coefs">
              <div class="pill">Exactitud (Accuracy): <span id="logAcc">â€“</span></div>
              <div class="pill">Error: <span id="logErr">â€“</span></div>
              <div class="pill">PrecisiÃ³n: <span id="logPrec">â€“</span></div>
              <div class="pill">Recall: <span id="logRec">â€“</span></div>
              <div class="pill">F1-score: <span id="logF1">â€“</span></div>
            </div>
          </div>
        </div>

        <h2>ğŸ§© Matriz de confusiÃ³n</h2>
        <div class="table-wrap">
          <table id="logConf">
            <thead>
              <tr>
                <th></th>
                <th>Pred. No Aprobado (0)</th>
                <th>Pred. Aprobado (1)</th>
              </tr>
            </thead>
            <tbody>
              <!-- Se llena desde JS -->
            </tbody>
          </table>
        </div>

        <h2>ğŸ”¢ Vista previa de los datos</h2>

        <h3>Entradas (X)</h3>
        <div class="table-wrap">
          <table id="tableX">
            <thead></thead>
            <tbody></tbody>
          </table>
        </div>

        <h3>Salidas (Y)</h3>
        <div class="table-wrap">
          <table id="tableY">
            <thead></thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="done">
          <span class="badge">âœ… Proceso completado</span>
          <p>
            Se genera un dataset acadÃ©mico sintÃ©tico, se define <b>Aprobado</b> como variable binaria (1 si
            <b>PromedioFinal â‰¥ 3.0</b>) y se entrena una <b>regresiÃ³n logÃ­stica</b> para clasificar a los estudiantes
            como aprobados o no aprobados. Se muestran las mÃ©tricas y la matriz de confusiÃ³n, junto con ejemplos de
            las entradas (X) y salidas (Y).
          </p>
        </div>
      </div>

      <div id="error" class="error hidden"></div>
    </section>

<!-- NUEVO: Bloques para la RNA -->

<div class="col">
        <h3>ğŸ§  Red Neuronal (MLP)</h3>
        <div class="actions">
 <button id="btnMlp" type="button" style="margin-left:1rem">ğŸ§  Ejecutar solo RNA (MLP)</button>
        </div>
      </div>
        <p>
          Exactitud (Accuracy): <span id="mlpAcc">â€“</span><br>
          Error: <span id="mlpErr">â€“</span><br>
          PrecisiÃ³n: <span id="mlpPrec">â€“</span><br>
          Recall: <span id="mlpRec">â€“</span><br>
          F1-score: <span id="mlpF1">â€“</span>
        </p>
        <h3>ğŸ§® Matriz de confusiÃ³n (MLP)</h3>
        <table id="mlpConf">
          <thead>
            <tr>
              <th></th>
              <th>Pred. No Aprobado (0)</th>
              <th>Pred. Aprobado (1)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <h3>ğŸ§© Arquitectura de la RNA</h3>
        <pre id="mlpArch">â€“</pre>
      </div>
    </div>

    <h2>ğŸ§ª Vista previa de los datos</h2>
    <div class="row">
      <div class="col">
        <h3>Entradas (X)</h3>
        <table id="tableX">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="col">
        <h3>Salidas (Y)</h3>
        <table id="tableY">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>



    <footer><p>Hecho con ğŸ’™ Flask + scikit-learn</p></footer>
  </div>

  <script src="{{ url_for('static', filename='app.js') }}?v=5"></script>
</body>
</html>
